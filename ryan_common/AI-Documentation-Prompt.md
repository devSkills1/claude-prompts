# AI 代码文档生成 Prompt 模板

## 使用说明

将以下 Prompt 复制给 AI，让 AI 分析代码库并生成文档。根据你的项目特点，可以调整 Prompt 中的具体参数。

---

## 完整 Prompt 模板

```
# 代码库分析与文档生成任务

你是一位资深的技术文档专家和软件架构师。我需要你深入分析这个代码库，并生成完整的技术文档。

## 第一阶段：代码库探索

### 1. 项目概览分析

请执行以下分析：

1. **识别项目类型和用途**
   - 查看 README.md、package.json、podspec、build.gradle 等配置文件
   - 确定这是什么类型的项目（SDK、应用、库、框架等）
   - 使用的主要编程语言和框架

2. **构建系统分析**
   - 如何构建项目
   - 依赖管理方式
   - 构建产物是什么

3. **目录结构分析**
   - 列出主要的目录及其用途
   - 识别源代码、测试、资源、文档的位置

### 2. 架构分析

请深入探索并分析：

1. **核心分层架构**
   - 识别项目的层次结构（如 UI 层、业务层、数据层等）
   - 每一层的主要职责
   - 层与层之间的依赖关系

2. **关键类和模块**
   - 找出核心基类（以 Base、Abstract、Core 等命名）
   - 找出工厂类、管理类、工具类
   - 识别主要的数据模型

3. **设计模式**
   - 识别使用的设计模式（工厂、单例、代理、观察者等）
   - 这些模式在代码中的具体应用

4. **数据流**
   - 数据从哪里来（网络、本地、传感器等）
   - 数据如何流转（经过哪些类和方法）
   - 最终如何展示或存储

### 3. 关键代码分析

请重点分析：

1. **入口点**
   - 应用的启动流程
   - SDK 的初始化方法
   - 主要的公共 API

2. **核心算法**
   - 重要的业务逻辑实现
   - 复杂的计算或转换逻辑

3. **扩展机制**
   - 如何添加新功能
   - 自定义和扩展的接口点

4. **配置系统**
   - 配置文件的位置和格式
   - 如何修改配置

## 第二阶段：文档生成

基于你的分析，生成以下文档（使用中文）：

### 文档 1: 架构图文档 (Architecture-Diagram.md)

**必须包含**：
- 项目概述（2-3 句话）
- 整体架构图（使用 ASCII 或 Mermaid）
- 数据流图（从输入到输出的完整流程）
- 核心组件交互图
- 类继承关系图（如果有 OOP）
- 每个图表的详细说明

### 文档 2: 快速使用指南 (Quick-Start-Guide.md)

**必须包含**：
- 环境要求（系统版本、依赖）
- 安装集成步骤
- 最简单的"Hello World"示例
- 核心功能使用说明（3-5 个）
- 常见配置说明
- 快速参考表（常用的常量、枚举、方法）

### 文档 3: API 参考文档 (API-Reference.md)

**必须包含**：
- 公共类和接口列表
- 每个 API 的：
  - 方法签名
  - 参数说明
  - 返回值说明
  - 使用示例
  - 注意事项

### 文档 4: 扩展开发指南 (Extension-Guide.md)

**必须包含**：
- 扩展方式概览（按难度分级）
- 自定义组件完整教程
- 代码示例
- 最佳实践

### 文档 5: 问题诊断指南 (Troubleshooting-Guide.md)

**必须包含**：
- 常见问题列表（至少 10 个）
- 每个问题的：
  - 症状描述
  - 诊断步骤
  - 解决方案
  - 预防措施

## 文档质量要求

1. **结构清晰**
   - 使用多级标题
   - 每个章节有明确的目的
   - 提供目录导航

2. **内容完整**
   - 覆盖从入门到高级的所有场景
   - 代码示例可以直接运行
   - 包含边界情况和错误处理

3. **易于理解**
   - 使用图表辅助说明
   - 专业术语有解释
   - 提供类比或场景描述

4. **实用性强**
   - 基于实际代码编写
   - 提供可复制的代码片段
   - 包含真实的使用场景

## 输出格式

1. 为每个文档创建独立的 Markdown 文件
2. 文件名使用英文，内容使用中文
3. 在 docs/ 目录下创建一个 README.md 作为文档索引

## 分析工具

你可以使用以下工具进行代码探索：
- Glob：查找文件模式
- Grep：搜索代码内容
- Read：读取文件内容
- Task：启动专门的探索代理

## 开始执行

请开始分析代码库，并按照上述要求生成文档。如果你需要我提供任何澄清或额外信息，请随时询问。
```

---

## 针对不同项目类型的定制 Prompt

### iOS/macOS 项目

```
在上述 Prompt 的基础上，额外分析：

1. **项目结构**
   - Xcode 项目文件 (.xcodeproj, .xcworkspace)
   - CocoaPods/SPM 依赖
   - Framework/Bundle 结构

2. **关键组件**
   - UIViewController 子类
   - 自定义 UIView/CALayer
   - 数据模型 (Model)
   - 网络层实现

3. **特殊机制**
   - 内存管理 (ARC/MRC)
   - 线程模型 (GCD/NSOperation)
   - KVO/KVC 使用
   - Category/Extension 扩展

4. **资源文件**
   - Storyboard/Xib
   - Asset Catalog
   - Info.plist 配置
```

### Android 项目

```
在上述 Prompt 的基础上，额外分析：

1. **项目结构**
   - Gradle 模块和依赖
   - AndroidManifest.xml
   - 资源目录结构

2. **关键组件**
   - Activity/Fragment
   - Service/BroadcastReceiver
   - ViewModel/Repository
   - Data Binding

3. **特殊机制**
   - 生命周期管理
   - 权限系统
   - 多进程支持
   - Jetpack 组件使用

4. **构建配置**
   - buildType 和 productFlavor
   - ProGuard/R8 混淆规则
```

### Web 前端项目 (React/Vue/Angular)

```
在上述 Prompt 的基础上，额外分析：

1. **项目结构**
   - package.json 依赖
   - src/ 目录组织
   - 组件层次结构

2. **关键组件**
   - 路由配置
   - 状态管理 (Redux/Vuex/NgRx)
   - API 服务层
   - 通用组件库

3. **特殊机制**
   - 组件生命周期
   - Hooks 模式
   - 虚拟 DOM
   - 构建优化

4. **样式方案**
   - CSS Modules
   - Styled Components
   - Tailwind/Sass
```

### 后端 API 项目

```
在上述 Prompt 的基础上，额外分析：

1. **项目结构**
   - 分层架构 (Controller/Service/Repository)
   - 模块划分
   - 配置管理

2. **关键组件**
   - 路由定义
   - 中间件链
   - 数据模型和 ORM
   - 认证授权

3. **特殊机制**
   - 依赖注入
   - 缓存策略
   - 异步处理
   - 错误处理

4. **API 设计**
   - RESTful 规范
   - 请求/响应格式
   - 版本管理
```

---

## 快速分析 Prompt（简化版）

```
# 快速代码库文档生成

请分析这个代码库并生成文档：

## 第一步：快速扫描

1. 这是什么类型的项目？（语言、框架、用途）
2. 主要的目录和文件有哪些？
3. 如何构建和运行？
4. 核心功能是什么？

## 第二步：深入分析

1. 画出项目的架构图（分层结构）
2. 识别关键类和它们的关系
3. 找出主要的公共 API
4. 理解数据流转过程

## 第三步：生成文档

生成以下 Markdown 文档：

### 1. README.md
- 项目简介
- 快速开始
- 主要功能

### 2. ARCHITECTURE.md
- 系统架构图
- 核心模块说明
- 设计模式

### 3. API.md
- 公共接口列表
- 使用示例
- 参数说明

### 4. GUIDE.md
- 常见使用场景
- 配置说明
- 最佳实践

## 要求

- 使用中文编写
- 包含代码示例
- 添加图表辅助说明
- 提供完整的步骤

开始分析！
```

---

## 交互式分析 Prompt（分步执行）

```
# 代码库文档生成 - 交互式模式

## 步骤 1：项目识别

首先，请告诉我：

1. 这是什么项目？
   - 项目名称和用途
   - 使用的技术栈
   - 项目类型（库/应用/框架等）

2. 如何开始？
   - 构建命令
   - 运行方式
   - 依赖安装

## 步骤 2：架构理解

请探索并回答：

1. 项目有哪些主要模块？
2. 这些模块之间如何协作？
3. 有哪些核心基类或接口？
4. 数据是如何流动的？

## 步骤 3：关键功能

请分析：

1. 主要的公共 API 有哪些？
2. 如何使用这些 API？
3. 有哪些配置选项？
4. 如何扩展功能？

## 步骤 4：文档编写

基于以上分析，生成：
- 架构文档（包含图表）
- 快速开始指南
- API 参考
- 故障排查指南

---

开始第一步：项目识别
```

---

## 使用示例

### 示例 1：分析新的 iOS SDK

```
请使用"代码库分析与文档生成任务"模板，重点分析：
- Objective-C/Swift 混编项目
- CocoaPods 集成方式
- Framework 打包和发布流程
- UIView/CALayer 自定义绘制
```

### 示例 2：分析 React 组件库

```
请使用"快速分析 Prompt（简化版）"模板，额外关注：
- TypeScript 类型定义
- 组件 Props 接口
- 样式方案
- Storybook 使用
```

### 示例 3：分析微服务后端

```
请使用"针对后端 API 项目"的定制 Prompt，重点分析：
- 服务拆分策略
- API 网关配置
- 服务发现机制
- 分布式事务处理
```

---

## 注意事项

1. **根据项目调整**：根据实际项目特点，调整 Prompt 的关注点
2. **分阶段执行**：对于大型项目，建议分阶段进行分析和文档生成
3. **提供反馈**：如果 AI 的分析方向偏离，及时提供纠正反馈
4. **验证输出**：生成文档后，验证代码示例的准确性

---

## 模板使用流程

```
1. 选择合适的 Prompt 模板
   ↓
2. 根据项目类型定制
   ↓
3. 提供给 AI 执行
   ↓
4. 审查分析结果
   ↓
5. 要求生成文档
   ↓
6. 验证文档质量
   ↓
7. 补充完善内容
```
